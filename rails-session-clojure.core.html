<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>rails-session-clojure.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Rails-session-clojure 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rails-session-clojure</span></div></div></li><li class="depth-2 current"><a href="rails-session-clojure.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="rails-session-clojure.core.html#var-add-signature"><div class="inner"><span>add-signature</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-calculate-secrets"><div class="inner"><span>calculate-secrets</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-combine-data-and-padding"><div class="inner"><span>combine-data-and-padding</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-create-session-decryptor"><div class="inner"><span>create-session-decryptor</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-create-session-encryptor"><div class="inner"><span>create-session-encryptor</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-decrypt"><div class="inner"><span>decrypt</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-default-encryption-salt"><div class="inner"><span>default-encryption-salt</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-default-signature-salt"><div class="inner"><span>default-signature-salt</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-encode-and-combine"><div class="inner"><span>encode-and-combine</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-encrypt"><div class="inner"><span>encrypt</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-generate-random-iv"><div class="inner"><span>generate-random-iv</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-json-generate-bytes"><div class="inner"><span>json-generate-bytes</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-json-parse-bytes"><div class="inner"><span>json-parse-bytes</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-pbkdf2"><div class="inner"><span>pbkdf2</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-run-crypto"><div class="inner"><span>run-crypto</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-separate-and-decode"><div class="inner"><span>separate-and-decode</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-separate-data-and-padding"><div class="inner"><span>separate-data-and-padding</span></div></a></li><li class="depth-1"><a href="rails-session-clojure.core.html#var-verify-signature"><div class="inner"><span>verify-signature</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">rails-session-clojure.core</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-add-signature"><h3>add-signature</h3><div class="usage"><code>(add-signature secret message)</code></div><div class="doc"><pre class="plaintext">Returns a base64-encoded message combined with its signature.
secret  - (byte[]) secret to be used during hashing
message - (String) message to generate signature for</pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L55">view source</a></div></div><div class="public anchor" id="var-calculate-secrets"><h3>calculate-secrets</h3><div class="usage"><code>(calculate-secrets secret-key-base)</code><code>(calculate-secrets secret-key-base signature-salt encryption-salt)</code></div><div class="doc"><pre class="plaintext">Returns signature and encryption secrets in a vector.
</pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L95">view source</a></div></div><div class="public anchor" id="var-combine-data-and-padding"><h3>combine-data-and-padding</h3><div class="usage"><code>(combine-data-and-padding data padding)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L31">view source</a></div></div><div class="public anchor" id="var-create-session-decryptor"><h3>create-session-decryptor</h3><div class="usage"><code>(create-session-decryptor &amp; config)</code></div><div class="doc"><pre class="plaintext">Returns a function that when called will verify signature, decrypt a session
string and deserialize the resulting json data into a map structure.

secret-key-base - (String) value of secret_key_base usually found in config/secrets.yml
signature-salt  - (String) value of &apos;config.action_dispatch.encrypted_cookie_salt&apos;
encryption-salt - (String) value of &apos;config.action_dispatch.encrypted_signed_cookie_salt&apos;</pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L103">view source</a></div></div><div class="public anchor" id="var-create-session-encryptor"><h3>create-session-encryptor</h3><div class="usage"><code>(create-session-encryptor &amp; config)</code></div><div class="doc"><pre class="plaintext">Returns a function that when called will serialize session hash to json,
encrypt and sign it.

secret-key-base - (String) value of secret_key_base usually found in config/secrets.yml
signature-salt  - (String) value of &apos;config.action_dispatch.encrypted_cookie_salt&apos;
encryption-salt - (String) value of &apos;config.action_dispatch.encrypted_signed_cookie_salt&apos;</pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L123">view source</a></div></div><div class="public anchor" id="var-decrypt"><h3>decrypt</h3><div class="usage"><code>(decrypt secret iv data)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L86">view source</a></div></div><div class="public anchor" id="var-default-encryption-salt"><h3>default-encryption-salt</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L93">view source</a></div></div><div class="public anchor" id="var-default-signature-salt"><h3>default-signature-salt</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L92">view source</a></div></div><div class="public anchor" id="var-encode-and-combine"><h3>encode-and-combine</h3><div class="usage"><code>(encode-and-combine padding data)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L37">view source</a></div></div><div class="public anchor" id="var-encrypt"><h3>encrypt</h3><div class="usage"><code>(encrypt secret iv data)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L89">view source</a></div></div><div class="public anchor" id="var-generate-random-iv"><h3>generate-random-iv</h3><div class="usage"><code>(generate-random-iv)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L40">view source</a></div></div><div class="public anchor" id="var-json-generate-bytes"><h3>json-generate-bytes</h3><div class="usage"><code>(json-generate-bytes message)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L68">view source</a></div></div><div class="public anchor" id="var-json-parse-bytes"><h3>json-parse-bytes</h3><div class="usage"><code>(json-parse-bytes message)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L65">view source</a></div></div><div class="public anchor" id="var-pbkdf2"><h3>pbkdf2</h3><div class="usage"><code>(pbkdf2 key salt size-in-bytes)</code></div><div class="doc"><pre class="plaintext">Returns bytes array of the specified length derived from applying PBKDF2
to the given key and salt.
key           - (String) key/password
salt          - (String) cryptographic salt
size-in-bytes - (int) desired length of the result in bytes</pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L14">view source</a></div></div><div class="public anchor" id="var-run-crypto"><h3>run-crypto</h3><div class="usage"><code>(run-crypto mode secret iv data)</code></div><div class="doc"><pre class="plaintext">Returns crypted/decrypted message depending on mode. Raises an exception
when unsuccessful.
mode   - (int)    Cipher/ENCRYPT_MODE or Cipher/DECRYPT_MODE
secret - (byte[]) encryption secret
iv     - (byte[]) initialization vector
data   - (byte[]) data to be en/de-crypted</pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L71">view source</a></div></div><div class="public anchor" id="var-separate-and-decode"><h3>separate-and-decode</h3><div class="usage"><code>(separate-and-decode message)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L34">view source</a></div></div><div class="public anchor" id="var-separate-data-and-padding"><h3>separate-data-and-padding</h3><div class="usage"><code>(separate-data-and-padding message)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L28">view source</a></div></div><div class="public anchor" id="var-verify-signature"><h3>verify-signature</h3><div class="usage"><code>(verify-signature message secret)</code></div><div class="doc"><pre class="plaintext">Returns data section of the message if the signature is valid or nil otherwise.
message - (String) message to be validated
secret  - (byte[]) secret to be used during hashing</pre></div><div class="src-link"><a href="https://github.com/mkwiatkowski/rails-session-clojure/blob/master/src/rails_session_clojure/core.clj#L43">view source</a></div></div></div></body></html>